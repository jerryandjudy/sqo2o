<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>N号仓微信支付</title>
</head>
<body>
<script type="text/javascript">
function onBridgeReady(){
	   WeixinJSBridge.invoke(
	       'getBrandWCPayRequest', {
	           "appId":"${zfbw['appId']}",//公众号名称，由商户传入     
	           "timeStamp":"${zfbw['timeStamp']}",//时间戳，自1970年以来的秒数     
	           "nonceStr":"${zfbw['nonceStr']}",//随机串     
	           "package":"${zfbw['package']}",     
	           "signType":"${zfbw['signType']}",//微信签名方式：     
	           "paySign":"${zfbw['paySign']}" //微信签名 
	       },
	       function(res){//alert(res.err_msg);
	           if(res.err_msg == "get_brand_wcpay_request:ok" ) {
	        	   window.location.href='${zfbw['fhdd']}';
	           }if(res.err_msg == "get_brand_wcpay_request:cancel" ) {
	        	   window.location.href='${zfbw['fhdd']}';
	           } 
	       }
	   ); 
	}
		if (typeof WeixinJSBridge == "undefined"){
		   if( document.addEventListener ){
		       document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
		   }else if (document.attachEvent){
		       document.attachEvent('WeixinJSBridgeReady', onBridgeReady); 
		       document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
		   }
		}else{
		   onBridgeReady();
		} 

</script>
</body>
</html>
